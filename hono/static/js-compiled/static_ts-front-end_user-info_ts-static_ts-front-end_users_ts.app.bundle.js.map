{"version":3,"file":"static_ts-front-end_user-info_ts-static_ts-front-end_users_ts.app.bundle.js","mappings":";;;;;;;;;;;;;;;;AAAA,iBAAiB,SAAI,IAAI,SAAI;AAC7B,4BAA4B,+DAA+D,iBAAiB;AAC5G;AACA,oCAAoC,MAAM,+BAA+B,YAAY;AACrF,mCAAmC,MAAM,mCAAmC,YAAY;AACxF,gCAAgC;AAChC;AACA,KAAK;AACL;AACA,mBAAmB,SAAI,IAAI,SAAI;AAC/B,cAAc,6BAA6B,0BAA0B,cAAc,qBAAqB;AACxG,6IAA6I,cAAc;AAC3J,uBAAuB,sBAAsB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC;AACxC,mCAAmC,SAAS;AAC5C,mCAAmC,WAAW,UAAU;AACxD,0CAA0C,cAAc;AACxD;AACA,8GAA8G,OAAO;AACrH,iFAAiF,iBAAiB;AAClG,yDAAyD,gBAAgB,QAAQ;AACjF,+CAA+C,gBAAgB,gBAAgB;AAC/E;AACA,kCAAkC;AAClC;AACA;AACA,UAAU,YAAY,aAAa,SAAS,UAAU;AACtD,oCAAoC,SAAS;AAC7C;AACA;AACsC;AACE;AACxC;AACA;AACA;AACO;AACP;AACA;AACA;AACA,oCAAoC,yBAAyB;AAC7D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,yBAAyB;AACrE;AACA;AACA;AACA;AACA;AACA,oBAAoB,qDAAa;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA,iEAAiE;AACjE;AACA;AACA;AACA;AACA,8BAA8B,+CAAQ,aAAa,+CAAQ,uBAAuB,+CAAQ;AAC1F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS,IAAI;AACb;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,sCAAsC;AAClF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,+CAAQ;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,+CAAQ;AACjC;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC,+CAAQ;AACjD;AACA,8CAA8C,+CAAQ;AACtD,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA,+CAA+C,+CAAQ;AACvD;AACA;AACA;AACA,6BAA6B;AAC7B,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,+CAAQ;AACjC;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC,+CAAQ;AACjD;AACA,8CAA8C,+CAAQ;AACtD,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA,+CAA+C,+CAAQ;AACvD;AACA;AACA;AACA,6BAA6B;AAC7B,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,+CAAQ;AACjC;AACA;AACA;AACA;AACA,+IAA+I,+CAAQ;AACvJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,kFAAkF,WAAW;AAC7F;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;AC1f2C;AACpC;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,oBAAoB;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gEAAgE,0BAA0B;AAC1F;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,0FAA0F,WAAW;AACrG;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,oFAAoF,cAAc;AAClG;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,wCAAwC;AACxC;AACA;AACA;AACA;AACA,wSAAwS,oFAAoF;AAC5X;AACA,oDAAoD,WAAW;AAC/D;AACA,oDAAoD,WAAW;AAC/D;AACA;AACA,oDAAoD,WAAW;AAC/D;AACA;AACA;AACA;AACA,IAAI,wDAAY;AAChB;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sources":["webpack://hono/./static/ts-front-end/user-info.ts","webpack://hono/./static/ts-front-end/users.ts"],"sourcesContent":["var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g = Object.create((typeof Iterator === \"function\" ? Iterator : Object).prototype);\n    return g.next = verb(0), g[\"throw\"] = verb(1), g[\"return\"] = verb(2), typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nimport { provider } from \"./metamask\";\nimport { updateUsersUI } from \"./users\";\nvar currentUser = null;\nvar currentPeriod = \"today\";\nvar isCopyingTrades = false;\nexport function showUserInfo(user) {\n    currentUser = user;\n    // Load user info HTML\n    fetch(\"/html/user-info.html\")\n        .then(function (response) { return response.text(); })\n        .then(function (html) {\n        var indexContent = document.querySelector(\".index-content\");\n        if (indexContent) {\n            indexContent.innerHTML = html;\n            initializeUserInfo();\n            populateUserData(user);\n            loadUserPositions(user.address);\n        }\n    })\n        .catch(function (error) {\n        console.error(\"Error loading user info:\", error);\n    });\n}\nfunction initializeUserInfo() {\n    var _this = this;\n    // Back button\n    var backButton = document.getElementById(\"backToUsers\");\n    if (backButton) {\n        backButton.addEventListener(\"click\", function () {\n            // Fetch and load the top traders HTML\n            fetch(\"/html/top-traders.html\")\n                .then(function (response) { return response.text(); })\n                .then(function (html) {\n                var indexContent = document.querySelector(\".index-content\");\n                if (indexContent) {\n                    indexContent.innerHTML = html;\n                    // Re-populate the users list\n                    updateUsersUI();\n                    // Update navigation button states\n                    var topTradersBtn = document.getElementById(\"topTradersBtn\");\n                    var myCopiesBtn = document.getElementById(\"myCopiesBtn\");\n                    if (topTradersBtn)\n                        topTradersBtn.classList.add(\"active\");\n                    if (myCopiesBtn)\n                        myCopiesBtn.classList.remove(\"active\");\n                }\n            })\n                .catch(function (error) {\n                console.error(\"Error loading top traders HTML:\", error);\n            });\n        });\n    }\n    // Copy trades button\n    var copyTradesButton = document.getElementById(\"copyTradesButton\");\n    if (copyTradesButton) {\n        copyTradesButton.addEventListener(\"click\", function () { return __awaiter(_this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        // Ensure the wallet is connected\n                        if (!(provider === null || provider === void 0 ? void 0 : provider.isConnected())) {\n                            alert(\"Wallet not connected. Please connect your wallet first.\");\n                            return [2 /*return*/];\n                        }\n                        if (!currentUser) {\n                            alert(\"No user selected.\");\n                            return [2 /*return*/];\n                        }\n                        // Toggle copy trading\n                        return [4 /*yield*/, toggleCopyTrades()];\n                    case 1:\n                        // Toggle copy trading\n                        _a.sent();\n                        return [2 /*return*/];\n                }\n            });\n        }); });\n    }\n    // Time period tabs\n    var timeTabs = document.querySelectorAll(\".time-tab\");\n    timeTabs.forEach(function (tab) {\n        tab.addEventListener(\"click\", function () {\n            // Remove active class from all tabs\n            timeTabs.forEach(function (t) { return t.classList.remove(\"active\"); });\n            // Add active class to clicked tab\n            tab.classList.add(\"active\");\n            var period = tab.getAttribute(\"data-period\");\n            if (period) {\n                currentPeriod = period;\n                updatePerformanceMetrics(period);\n            }\n        });\n    });\n}\nfunction toggleCopyTrades() {\n    return __awaiter(this, void 0, void 0, function () {\n        var copyTradesButton, error_1;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    if (!provider || !currentUser)\n                        return [2 /*return*/];\n                    copyTradesButton = document.getElementById(\"copyTradesButton\");\n                    if (!copyTradesButton)\n                        return [2 /*return*/];\n                    _a.label = 1;\n                case 1:\n                    _a.trys.push([1, 6, 7, 8]);\n                    // Disable button during operation\n                    copyTradesButton.setAttribute(\"disabled\", \"true\");\n                    copyTradesButton.textContent = \"Processing...\";\n                    if (!isCopyingTrades) return [3 /*break*/, 3];\n                    return [4 /*yield*/, stopCopyingTrades()];\n                case 2:\n                    _a.sent();\n                    return [3 /*break*/, 5];\n                case 3: return [4 /*yield*/, favoriteUser()];\n                case 4:\n                    _a.sent();\n                    _a.label = 5;\n                case 5: return [3 /*break*/, 8];\n                case 6:\n                    error_1 = _a.sent();\n                    console.error(\"Error toggling copy trades:\", error_1);\n                    alert(\"Failed to toggle copy trading. Please try again.\");\n                    return [3 /*break*/, 8];\n                case 7:\n                    // Re-enable button\n                    copyTradesButton.removeAttribute(\"disabled\");\n                    return [7 /*endfinally*/];\n                case 8: return [2 /*return*/];\n            }\n        });\n    });\n}\nfunction favoriteUser() {\n    return __awaiter(this, void 0, void 0, function () {\n        var timestamp, message, signature, response, result, error_2;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    if (!provider || !currentUser)\n                        return [2 /*return*/];\n                    _a.label = 1;\n                case 1:\n                    _a.trys.push([1, 5, , 6]);\n                    timestamp = Date.now();\n                    message = \"DEXMT Copy Trading Authorization\\nTrader: \".concat(currentUser.address, \"\\nTimestamp: \").concat(timestamp, \"\\nAction: START_COPY_TRADING\\n\\nBy signing this message, you authorize DEXMT to copy trades from the specified trader to your wallet.\");\n                    return [4 /*yield*/, provider.request({\n                            method: \"personal_sign\",\n                            params: [message, provider.selectedAddress],\n                        })];\n                case 2:\n                    signature = (_a.sent());\n                    return [4 /*yield*/, fetch(\"/api/trader/favorite\", {\n                            method: \"POST\",\n                            headers: {\n                                \"Content-Type\": \"application/json\",\n                            },\n                            body: JSON.stringify({\n                                traderAddress: currentUser.address,\n                                copierAddress: provider.selectedAddress,\n                                message: message,\n                                signature: signature,\n                                timestamp: timestamp,\n                            }),\n                        })];\n                case 3:\n                    response = _a.sent();\n                    return [4 /*yield*/, response.json()];\n                case 4:\n                    result = _a.sent();\n                    if (!response.ok) {\n                        throw new Error(result.error || \"Failed to start copy trading\");\n                    }\n                    // Update UI state\n                    isCopyingTrades = true;\n                    updateCopyTradesButton(true);\n                    alert(\"Successfully started copying trades from \".concat(currentUser.address.slice(0, 6), \"...\").concat(currentUser.address.slice(-4)));\n                    return [3 /*break*/, 6];\n                case 5:\n                    error_2 = _a.sent();\n                    console.error(\"Error starting copy trades:\", error_2);\n                    if (error_2 instanceof Error) {\n                        alert(\"Failed to start copy trading: \".concat(error_2.message));\n                    }\n                    else {\n                        alert(\"Failed to start copy trading. Please try again.\");\n                    }\n                    return [3 /*break*/, 6];\n                case 6: return [2 /*return*/];\n            }\n        });\n    });\n}\nfunction stopCopyingTrades() {\n    return __awaiter(this, void 0, void 0, function () {\n        var timestamp, message, signature, response, result, error_3;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    if (!provider || !currentUser)\n                        return [2 /*return*/];\n                    _a.label = 1;\n                case 1:\n                    _a.trys.push([1, 5, , 6]);\n                    timestamp = Date.now();\n                    message = \"DEXMT Copy Trading Termination\\nTrader: \".concat(currentUser.address, \"\\nTimestamp: \").concat(timestamp, \"\\nAction: STOP_COPY_TRADING\\n\\nBy signing this message, you authorize DEXMT to stop copying trades from the specified trader.\");\n                    return [4 /*yield*/, provider.request({\n                            method: \"personal_sign\",\n                            params: [message, provider.selectedAddress],\n                        })];\n                case 2:\n                    signature = (_a.sent());\n                    return [4 /*yield*/, fetch(\"/api/copy-trading/stop\", {\n                            method: \"POST\",\n                            headers: {\n                                \"Content-Type\": \"application/json\",\n                            },\n                            body: JSON.stringify({\n                                traderAddress: currentUser.address,\n                                copierAddress: provider.selectedAddress,\n                                message: message,\n                                signature: signature,\n                                timestamp: timestamp,\n                            }),\n                        })];\n                case 3:\n                    response = _a.sent();\n                    return [4 /*yield*/, response.json()];\n                case 4:\n                    result = _a.sent();\n                    if (!response.ok) {\n                        throw new Error(result.error || \"Failed to stop copy trading\");\n                    }\n                    // Update UI state\n                    isCopyingTrades = false;\n                    updateCopyTradesButton(false);\n                    alert(\"Successfully stopped copying trades from \".concat(currentUser.address.slice(0, 6), \"...\").concat(currentUser.address.slice(-4)));\n                    return [3 /*break*/, 6];\n                case 5:\n                    error_3 = _a.sent();\n                    console.error(\"Error stopping copy trades:\", error_3);\n                    if (error_3 instanceof Error) {\n                        alert(\"Failed to stop copy trading: \".concat(error_3.message));\n                    }\n                    else {\n                        alert(\"Failed to stop copy trading. Please try again.\");\n                    }\n                    return [3 /*break*/, 6];\n                case 6: return [2 /*return*/];\n            }\n        });\n    });\n}\nfunction updateCopyTradesButton(isActive) {\n    var copyTradesButton = document.getElementById(\"copyTradesButton\");\n    if (!copyTradesButton)\n        return;\n    if (isActive) {\n        copyTradesButton.classList.add(\"active\");\n        copyTradesButton.innerHTML = \"\\n      <svg\\n        slot=\\\"icon\\\"\\n        xmlns=\\\"http://www.w3.org/2000/svg\\\"\\n        height=\\\"20\\\"\\n        viewBox=\\\"0 0 24 24\\\"\\n        width=\\\"20\\\"\\n      >\\n        <path d=\\\"M0 0h24v24H0z\\\" fill=\\\"none\\\"/>\\n        <path d=\\\"M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z\\\"/>\\n      </svg>\\n      Copying Trades\\n    \";\n    }\n    else {\n        copyTradesButton.classList.remove(\"active\");\n        copyTradesButton.innerHTML = \"\\n      <svg\\n        slot=\\\"icon\\\"\\n        xmlns=\\\"http://www.w3.org/2000/svg\\\"\\n        height=\\\"20\\\"\\n        viewBox=\\\"0 0 24 24\\\"\\n        width=\\\"20\\\"\\n      >\\n        <path d=\\\"M0 0h24v24H0z\\\" fill=\\\"none\\\"/>\\n        <path d=\\\"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z\\\"/>\\n      </svg>\\n      Copy Trades\\n    \";\n    }\n}\n// Check copy trading status when user info loads\nfunction checkCopyTradingStatus() {\n    return __awaiter(this, void 0, void 0, function () {\n        var response, result, error_4;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    if (!provider || !currentUser)\n                        return [2 /*return*/];\n                    _a.label = 1;\n                case 1:\n                    _a.trys.push([1, 5, , 6]);\n                    return [4 /*yield*/, fetch(\"/api/copy-trading/status?traderAddress=\".concat(currentUser.address, \"&copierAddress=\").concat(provider.selectedAddress))];\n                case 2:\n                    response = _a.sent();\n                    if (!response.ok) return [3 /*break*/, 4];\n                    return [4 /*yield*/, response.json()];\n                case 3:\n                    result = _a.sent();\n                    console.log(\"Copy trading status:\", result);\n                    isCopyingTrades = result.isActive || false;\n                    updateCopyTradesButton(isCopyingTrades);\n                    _a.label = 4;\n                case 4: return [3 /*break*/, 6];\n                case 5:\n                    error_4 = _a.sent();\n                    console.error(\"Error checking copy trading status:\", error_4);\n                    return [3 /*break*/, 6];\n                case 6: return [2 /*return*/];\n            }\n        });\n    });\n}\nfunction populateUserData(user) {\n    // User avatar\n    var userAvatar = document.getElementById(\"userAvatar\");\n    if (userAvatar) {\n        var addressHash = user.address.slice(2, 4).toUpperCase();\n        userAvatar.textContent = addressHash;\n        userAvatar.style.background = \"linear-gradient(135deg, #bb86fc, #03dac6)\";\n    }\n    // User address\n    var userAddress = document.getElementById(\"userAddress\");\n    if (userAddress) {\n        userAddress.textContent = user.address;\n    }\n    // Platform and rank\n    var userPlatform = document.getElementById(\"userPlatform\");\n    if (userPlatform) {\n        userPlatform.textContent = user.dex_platform || \"Unknown Platform\";\n    }\n    var userRank = document.getElementById(\"userRank\");\n    if (userRank) {\n        userRank.textContent = \"#\".concat(user.platform_ranking || \"Unranked\");\n    }\n    // Load initial performance metrics\n    updatePerformanceMetrics(\"today\");\n    // Check if we're already copying this user's trades\n    checkCopyTradingStatus();\n}\nfunction updatePerformanceMetrics(period) {\n    // Mock data - replace with actual API calls later\n    var mockData = {\n        today: {\n            pnl: 1250.5,\n            pnlPercentage: 2.35,\n            volume: 125000,\n            avgSize: 5000,\n            winRate: 65.5,\n            totalTrades: 8,\n        },\n        yesterday: {\n            pnl: -580.25,\n            pnlPercentage: -1.12,\n            volume: 89000,\n            avgSize: 4800,\n            winRate: 45.2,\n            totalTrades: 12,\n        },\n        \"7d\": {\n            pnl: 8950.75,\n            pnlPercentage: 15.8,\n            volume: 850000,\n            avgSize: 5200,\n            winRate: 58.3,\n            totalTrades: 67,\n        },\n        \"30d\": {\n            pnl: 25680.3,\n            pnlPercentage: 45.2,\n            volume: 3200000,\n            avgSize: 4900,\n            winRate: 62.1,\n            totalTrades: 245,\n        },\n        year: {\n            pnl: 156000.8,\n            pnlPercentage: 312.5,\n            volume: 15600000,\n            avgSize: 5100,\n            winRate: 59.8,\n            totalTrades: 1204,\n        },\n        all: {\n            pnl: 245000.5,\n            pnlPercentage: 485.2,\n            volume: 25000000,\n            avgSize: 5050,\n            winRate: 61.2,\n            totalTrades: 1856,\n        },\n    };\n    var data = mockData[period];\n    if (!data)\n        return;\n    // Update PNL\n    var pnlValue = document.getElementById(\"pnlValue\");\n    var pnlPercentage = document.getElementById(\"pnlPercentage\");\n    if (pnlValue && pnlPercentage) {\n        var pnlClass = data.pnl >= 0 ? \"positive\" : \"negative\";\n        var pnlSign = data.pnl >= 0 ? \"+\" : \"\";\n        pnlValue.textContent = \"\".concat(pnlSign, \"$\").concat(Math.abs(data.pnl).toLocaleString());\n        pnlValue.className = \"metric-value pnl \".concat(pnlClass);\n        pnlPercentage.textContent = \"\".concat(pnlSign).concat(data.pnlPercentage.toFixed(2), \"%\");\n        pnlPercentage.className = \"metric-value pnl \".concat(pnlClass);\n    }\n    // Update other metrics\n    var volumeValue = document.getElementById(\"volumeValue\");\n    if (volumeValue) {\n        volumeValue.textContent = \"$\".concat(data.volume.toLocaleString());\n    }\n    var avgSizeValue = document.getElementById(\"avgSizeValue\");\n    if (avgSizeValue) {\n        avgSizeValue.textContent = \"$\".concat(data.avgSize.toLocaleString());\n    }\n    var winRateValue = document.getElementById(\"winRateValue\");\n    if (winRateValue) {\n        winRateValue.textContent = \"\".concat(data.winRate.toFixed(1), \"%\");\n    }\n    var totalTradesValue = document.getElementById(\"totalTradesValue\");\n    if (totalTradesValue) {\n        totalTradesValue.textContent = data.totalTrades.toString();\n    }\n}\nfunction loadUserPositions(userAddress) {\n    // Mock positions data - replace with actual API call later\n    var mockPositions = [\n        {\n            market: \"ETH/USD\",\n            side: \"LONG\",\n            leverage: \"10.5x\",\n            size: \"$12,500\",\n            netValue: \"+$1,250\",\n            collateral: \"$1,190\",\n            entryPrice: \"$3,250.50\",\n            markPrice: \"$3,352.80\",\n            liqPrice: \"$2,890.25\",\n        },\n        {\n            market: \"BTC/USD\",\n            side: \"SHORT\",\n            leverage: \"5.2x\",\n            size: \"$8,750\",\n            netValue: \"-$420\",\n            collateral: \"$1,680\",\n            entryPrice: \"$65,280.00\",\n            markPrice: \"$64,850.50\",\n            liqPrice: \"$78,350.00\",\n        },\n    ];\n    var positionsList = document.querySelector(\".positions-list\");\n    if (!positionsList)\n        return;\n    var fragment = document.createDocumentFragment();\n    if (mockPositions.length > 0) {\n        mockPositions.forEach(function (position) {\n            var sideClass = position.side.toLowerCase();\n            var netValueClass = position.netValue.startsWith(\"+\")\n                ? \"positive\"\n                : \"negative\";\n            var positionRow = document.createElement(\"tr\");\n            positionRow.className = \"position-item\";\n            positionRow.innerHTML = \"\\n        <td class=\\\"position-side \".concat(sideClass, \"\\\">\\n          \").concat(position.side, \" \").concat(position.market, \"\\n        </td>\\n        <td class=\\\"position-leverage\\\">\").concat(position.leverage, \"</td>\\n        <td class=\\\"position-size\\\">\").concat(position.size, \"</td>\\n        <td class=\\\"position-net-value \").concat(netValueClass, \"\\\">\").concat(position.netValue, \"</td>\\n        <td class=\\\"position-collateral\\\">\").concat(position.collateral, \"</td>\\n        <td class=\\\"position-entry-price\\\">\").concat(position.entryPrice, \"</td>\\n        <td class=\\\"position-mark-price\\\">\").concat(position.markPrice, \"</td>\\n        <td class=\\\"position-liq-price\\\">\").concat(position.liqPrice, \"</td>\\n      \");\n            fragment.appendChild(positionRow);\n        });\n    }\n    else {\n        var emptyRow = document.createElement(\"tr\");\n        emptyRow.className = \"position-item\";\n        emptyRow.innerHTML = \"\\n      <td colspan=\\\"8\\\" style=\\\"text-align:center;color:#666;padding:20px\\\">\\n        No open positions\\n      </td>\";\n        fragment.appendChild(emptyRow);\n    }\n    positionsList.replaceChildren(fragment);\n}\nexport function abbreviateNumber(value) {\n    if (Math.abs(value) >= 1e6) {\n        return (value / 1e6).toFixed(1).replace(/\\.0$/, \"\") + \"M\";\n    }\n    if (Math.abs(value) >= 1e3) {\n        return (value / 1e3).toFixed(1).replace(/\\.0$/, \"\") + \"K\";\n    }\n    return value.toString();\n}\n","import { showUserInfo } from \"./user-info\";\nexport function abbreviateNumber(value) {\n    var num = Number(value) || 0;\n    if (Math.abs(num) >= 1e6) {\n        return (num / 1e6).toFixed(1).replace(/\\.0$/, \"\") + \"M\";\n    }\n    if (Math.abs(num) >= 1e3) {\n        return (num / 1e3).toFixed(1).replace(/\\.0$/, \"\") + \"K\";\n    }\n    return num.toString();\n}\nexport function updateUsersUI() {\n    var usersList = document.querySelector(\".user-list\");\n    if (!usersList) {\n        console.warn(\"User list element not found\");\n        return;\n    }\n    fetch(\"/api/users\")\n        .then(function (res) { return res.json(); })\n        .then(function (users) {\n        var fragment = document.createDocumentFragment();\n        if (Array.isArray(users) && users.length > 0) {\n            users.forEach(function (user, index) {\n                var _a;\n                var pnlValue = Number(user.pnlPercentage) || 0;\n                var pnlClass = pnlValue >= 0 ? \"positive\" : \"negative\";\n                var pnlText = pnlValue.toFixed(2);\n                var sizeText = abbreviateNumber((_a = user.avgSize) !== null && _a !== void 0 ? _a : 0);\n                var leverageValue = Number(user.avgLeverage) || 0;\n                var leverageText = leverageValue.toFixed(1);\n                var winRatioValue = Number(user.winRatio) || 0;\n                var winRatioText = winRatioValue.toFixed(2);\n                var watchingCount = user.watching || 0;\n                // Get platform icon\n                var platformIcon = getPlatformIcon(user.dex_platform);\n                var addressHash = user.address.slice(2, 4).toUpperCase();\n                var userRow = document.createElement(\"tr\");\n                userRow.className = \"user-item\";\n                userRow.innerHTML = \"\\n            <td class=\\\"user-rank\\\">#\".concat(user.platform_ranking || index + 1, \"</td>\\n            <td class=\\\"user-platform\\\">\").concat(platformIcon, \"</td>\\n            <td class=\\\"user-trader\\\">\\n              <div class=\\\"trader-icon\\\">\").concat(addressHash, \"</div>\\n              <div class=\\\"trader-address\\\">\\n                \").concat(user.address.slice(0, 6), \"...\").concat(user.address.slice(-4), \"\\n              </div>\\n            </td>\\n            <td class=\\\"user-pnl \").concat(pnlClass, \"\\\">\").concat(pnlText, \"%</td>\\n            <td class=\\\"user-size\\\">\").concat(sizeText, \"</td>\\n            <td class=\\\"user-leverage\\\">\").concat(leverageText, \"x</td>\\n            <td class=\\\"user-winratio\\\">\").concat(winRatioText, \"</td>\\n            <td class=\\\"user-watching\\\">\").concat(watchingCount, \"</td>\\n          \");\n                userRow.addEventListener(\"click\", function () { return selectUser(user); });\n                fragment.appendChild(userRow);\n            });\n        }\n        else {\n            var emptyRow = document.createElement(\"tr\");\n            emptyRow.className = \"user-item\";\n            emptyRow.innerHTML = \"\\n          <td colspan=\\\"8\\\" style=\\\"text-align:center;color:#666;padding:20px\\\">\\n            No users found\\n          </td>\";\n            fragment.appendChild(emptyRow);\n        }\n        usersList.replaceChildren(fragment);\n        console.log(\"Loaded \".concat(users.length, \" users\"));\n    })\n        .catch(function (error) {\n        console.error(\"Error fetching users:\", error);\n        var fragment = document.createDocumentFragment();\n        var errorRow = document.createElement(\"tr\");\n        errorRow.className = \"user-item\";\n        errorRow.innerHTML = \"\\n        <td colspan=\\\"8\\\" style=\\\"text-align:center;color:#f44336;padding:20px\\\">\\n          Failed to load users\\n        </td>\";\n        fragment.appendChild(errorRow);\n        usersList.replaceChildren(fragment);\n    });\n}\nfunction getPlatformIcon(platform) {\n    if (!platform) {\n        return '<span style=\"color:#666;\">-</span>';\n    }\n    var platformLower = platform.toLowerCase();\n    switch (platformLower) {\n        case \"gmx\":\n            return \"\\n        <svg width=\\\"24\\\" height=\\\"24\\\" viewBox=\\\"0 0 30 30\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\">\\n          <defs>\\n            <linearGradient id=\\\"gmx-gradient\\\" x1=\\\"0%\\\" y1=\\\"0%\\\" x2=\\\"100%\\\" y2=\\\"100%\\\">\\n              <stop offset=\\\"0%\\\" style=\\\"stop-color:#4f46e5;stop-opacity:1\\\" />\\n              <stop offset=\\\"100%\\\" style=\\\"stop-color:#06b6d4;stop-opacity:1\\\" />\\n            </linearGradient>\\n          </defs>\\n          <path fill=\\\"url(#gmx-gradient)\\\" transform=\\\"translate(-525.667 -696) scale(1)\\\" d=\\\"m555.182 717.462-14.735-21.462-14.78 21.462h20.592l-5.812-8.191-2.883 4.256h-3.064l5.949-8.557 8.6 12.493z\\\"/>\\n        </svg>\\n      \";\n        case \"dydx\":\n            return \"<span style=\\\"font-size:0.75rem;color:#888;\\\">DYDX</span>\";\n        case \"hyperliquid\":\n            return \"<span style=\\\"font-size:0.75rem;color:#888;\\\">HL</span>\";\n        default:\n            // Fallback to text if no icon available\n            return \"<span style=\\\"font-size:0.75rem;color:#888;\\\">\".concat(platform.toUpperCase(), \"</span>\");\n    }\n}\nfunction selectUser(user) {\n    console.log(\"User selected:\", user);\n    showUserInfo(user);\n}\nexport function generateIconColor(address) {\n    var hash = address.slice(2, 8);\n    var r = parseInt(hash.slice(0, 2), 16);\n    var g = parseInt(hash.slice(2, 4), 16);\n    var b = parseInt(hash.slice(4, 6), 16);\n    return \"rgb(\".concat(r, \", \").concat(g, \", \").concat(b, \")\");\n}\n// Export to global window (for compatibility)\nwindow.UsersManager = {\n    updateUsersUI: updateUsersUI,\n    abbreviateNumber: abbreviateNumber,\n    generateIconColor: generateIconColor,\n    selectUser: selectUser,\n};\n"],"names":[],"sourceRoot":""}